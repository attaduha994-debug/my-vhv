<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ŸÑÿπÿ®ÿ© X Ÿà O - ÿßŸÑŸÖÿ´ŸÑÿ´ÿßÿ™</title>
  <style>
    body {
      font-family: 'Tajawal', 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #a8e6cf, #dcedc1, #ffd3b6);
      margin: 0;
      padding: 20px;
      text-align: center;
      min-height: 100vh;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 15px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    #status {
      font-size: 24px;
      margin: 15px 0;
      color: #c0392b;
      font-weight: bold;
      background: rgba(255,255,255,0.7);
      padding: 8px 20px;
      border-radius: 10px;
      display: inline-block;
    }
    .game-board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      gap: 12px;
      margin: 20px auto;
      max-width: 330px;
    }
    .cell {
      width: 100px;
      height: 100px;
      background: white;
      border: 3px solid #2980b9;
      font-size: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 12px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: all 0.2s;
    }
    .cell:hover {
      background-color: #e3f2fd;
      transform: scale(1.03);
    }
    #reset {
      padding: 10px 25px;
      font-size: 18px;
      background: #2980b9;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 10px;
      font-weight: bold;
      box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    }
    #reset:hover {
      background: #1c6ea4;
    }

    /* Modal ŸÑŸÑÿ≥ÿ§ÿßŸÑ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.75);
      z-index: 1000;
    }
    .modal-content {
      background: white;
      width: 92%;
      max-width: 520px;
      margin: 12% auto;
      padding: 25px;
      border-radius: 16px;
      text-align: right;
      direction: rtl;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
    .modal h2 {
      margin-top: 0;
      color: #1a5276;
      font-size: 22px;
    }
    .option {
      display: block;
      margin: 12px 0;
      padding: 12px;
      background: #f8f9fa;
      border: 1px solid #d1e7ff;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .option:hover {
      background: #e7f3ff;
    }
    .option input {
      margin-left: 10px;
    }
    .btn {
      margin-top: 15px;
      padding: 11px 28px;
      background: #27ae60;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 17px;
      font-weight: bold;
      box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    }
    .btn:hover {
      background: #219653;
    }
    .error {
      color: #e74c3c;
      margin-top: 12px;
      font-weight: bold;
      min-height: 24px;
    }
  </style>
</head>
<body>

  <h1>üéÆ ŸÑÿπÿ®ÿ© X Ÿà O - ÿßŸÑŸÖÿ´ŸÑÿ´ÿßÿ™ üìê</h1>
  <div id="status">ÿØŸàÿ± ÿßŸÑŸÑÿßÿπÿ®: X</div>
  <div class="game-board" id="board">
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
  </div>
  <button id="reset">ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÑÿπÿ®ÿ©</button>

  <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ≥ÿ§ÿßŸÑ -->
  <div id="questionModal" class="modal">
    <div class="modal-content">
      <h2 id="modalQuestion">ÿßŸÑÿ≥ÿ§ÿßŸÑ ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß</h2>
      <form id="questionForm">
        <div id="optionsContainer"></div>
        <div id="errorMessage" class="error"></div>
        <button type="button" class="btn" onclick="submitAnswer()">ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©</button>
      </form>
    </div>
  </div>

  <script>
    // ============ 54 ÿ≥ÿ§ÿßŸÑŸãÿß: 20 ÿµÿ≠/ÿÆÿ∑ÿ£ + 34 ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØ ============
    const allQuestions = [
      // === ÿ£ÿ≥ÿ¶ŸÑÿ© ÿµÿ≠/ÿÆÿ∑ÿ£ (20 ÿ≥ÿ§ÿßŸÑŸãÿß) ===
      { type: "tf", q: "ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿå ÿßŸÑÿ≤ÿßŸàŸäÿ™ÿßŸÜ ÿπŸÜÿØ ÿßŸÑŸÇÿßÿπÿØÿ© ŸÖÿ™ÿ≥ÿßŸàŸäÿ™ÿßŸÜ.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ŸÑŸá ÿ´ŸÑÿßÿ´ ÿ≤ŸàÿßŸäÿß ŸÖÿÆÿ™ŸÑŸÅÿ©.", answer: true },
      { type: "tf", q: "ŸÖÿ¨ŸÖŸàÿπ ÿ∑ŸàŸÑŸä ÿ£Ÿä ÿ∂ŸÑÿπŸäŸÜ ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ÿ£ŸÇŸÑ ŸÖŸÜ ÿ∑ŸàŸÑ ÿßŸÑÿ∂ŸÑÿπ ÿßŸÑÿ´ÿßŸÑÿ´.", answer: false },
      { type: "tf", q: "ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπÿå ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≤ŸàÿßŸäÿß ÿ™ÿ≥ÿßŸàŸä 60 ÿØÿ±ÿ¨ÿ©.", answer: true },
      { type: "tf", q: "ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπŸá 2 ÿ≥ŸÖÿå 3 ÿ≥ŸÖÿå 6 ÿ≥ŸÖ.", answer: false },
      { type: "tf", q: "ÿßŸÑÿπŸÖŸàÿØ ÿßŸÑŸÜÿßÿ≤ŸÑ ŸÖŸÜ ÿ±ÿ£ÿ≥ ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ ÿπŸÑŸâ ÿßŸÑŸÇÿßÿπÿØÿ© ŸäŸÜÿµŸÅ ÿßŸÑŸÇÿßÿπÿØÿ©.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ŸáŸà ÿ≠ÿßŸÑÿ© ÿÆÿßÿµÿ© ŸÖŸÜ ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ.", answer: true },
      { type: "tf", q: "ŸÑÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© 3 ÿ£ÿ∂ŸÑÿßÿπ ŸÜÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÅÿ±ÿ¨ÿßÿ±.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ŸÑŸá ÿ∂ŸÑÿπÿßŸÜ ŸÖÿ™ÿ≥ÿßŸàŸäÿßŸÜ Ÿàÿ≤ÿßŸàŸäÿ© ÿ±ÿ£ÿ≥ 60¬∞ ŸáŸà ŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ.", answer: true },
      { type: "tf", q: "ŸäŸÖŸÉŸÜ ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÑŸÑŸÖÿ´ŸÑÿ´ ÿ≤ÿßŸàŸäÿ™ÿßŸÜ ŸÇÿßÿ¶ŸÖÿ™ÿßŸÜ.", answer: false },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ ŸäŸÖŸÉŸÜ ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÖŸÜŸÅÿ±ÿ¨ ÿßŸÑÿ≤ÿßŸàŸäÿ©.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ŸÑÿß ŸäŸÖŸÉŸÜ ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÇÿßÿ¶ŸÖ ÿßŸÑÿ≤ÿßŸàŸäÿ©.", answer: false },
      { type: "tf", q: "ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿå ÿßŸÑÿπŸÖŸàÿØ ŸÖŸÜ ÿßŸÑÿ±ÿ£ÿ≥ ÿπŸÑŸâ ÿßŸÑŸÇÿßÿπÿØÿ© ŸäŸÜÿµŸÅ ÿ≤ÿßŸàŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥.", answer: true },
      { type: "tf", q: "ŸÖÿ¨ŸÖŸàÿπ ÿ≤ŸàÿßŸäÿß ÿßŸÑŸÖÿ´ŸÑÿ´ Ÿäÿ≥ÿßŸàŸä 180 ÿØÿ±ÿ¨ÿ©.", answer: true },
      { type: "tf", q: "ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿ¨ŸÖŸàÿπ ÿ∑ŸàŸÑŸä ÿ∂ŸÑÿπŸäŸÜ Ÿäÿ≥ÿßŸàŸä ÿ∑ŸàŸÑ ÿßŸÑÿ∂ŸÑÿπ ÿßŸÑÿ´ÿßŸÑÿ´.", answer: false },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ŸÑŸá ÿ´ŸÑÿßÿ´ ÿ≤ŸàÿßŸäÿß ÿ≠ÿßÿØÿ©.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÅÿ±ÿ¨ÿßÿ± ŸäŸèÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ÿßŸÑŸÖÿ≥ÿ™ŸÇŸäŸÖÿ©.", answer: false },
      { type: "tf", q: "ÿßŸÑŸÖŸÜŸÇŸÑÿ© ÿ™Ÿèÿ≥ÿ™ÿÆÿØŸÖ ŸÑŸÇŸäÿßÿ≥ ÿßŸÑÿ≤ŸàÿßŸäÿß ÿπŸÜÿØ ÿ±ÿ≥ŸÖ ÿßŸÑŸÖÿ´ŸÑÿ´.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπŸá 5 ÿ≥ŸÖÿå 5 ÿ≥ŸÖÿå 8 ÿ≥ŸÖ ŸáŸà ŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ.", answer: true },
      { type: "tf", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ÿ≤ŸàÿßŸäÿßŸá 50¬∞ÿå 60¬∞ÿå 70¬∞ ŸáŸà ŸÖÿ´ŸÑÿ´ ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ.", answer: true },

      // === ÿ£ÿ≥ÿ¶ŸÑÿ© ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØ (34 ÿ≥ÿ§ÿßŸÑŸãÿß) ===
      { type: "mc", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ÿ¨ŸÖŸäÿπ ÿ£ÿ∂ŸÑÿßÿπŸá ŸÖÿÆÿ™ŸÑŸÅÿ© Ÿäÿ≥ŸÖŸâ:", options: ["ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÇÿßÿ¶ŸÖ"], answer: 1 },
      { type: "mc", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ÿ∑ŸàŸÑÿß ÿ≥ÿßŸÇŸäŸá ŸÖÿ™ÿ≥ÿßŸàŸäÿßŸÜ Ÿäÿ≥ŸÖŸâ:", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖŸÜŸÅÿ±ÿ¨"], answer: 1 },
      { type: "mc", q: "ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπÿå ŸÇŸäÿßÿ≥ ŸÉŸÑ ÿ≤ÿßŸàŸäÿ© ŸáŸà:", options: ["30¬∞", "45¬∞", "60¬∞", "90¬∞"], answer: 2 },
      { type: "mc", q: "ŸÑÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© ÿ∑ŸàŸÑ ÿ£ÿ∂ŸÑÿßÿπŸá ÿßŸÑÿ´ŸÑÿßÿ´ÿ©ÿå ŸÜÿ≥ÿ™ÿÆÿØŸÖ:", options: ["ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÖŸÜŸÇŸÑÿ©", "ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÅÿ±ÿ¨ÿßÿ±", "ŸÅÿ±ÿ¨ÿßÿ± ŸÅŸÇÿ∑", "ŸÖŸÜŸÇŸÑÿ© ŸÅŸÇÿ∑"], answer: 1 },
      { type: "mc", q: "ŸÑÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© ÿ∂ŸÑÿπŸäŸÜ ŸàÿßŸÑÿ≤ÿßŸàŸäÿ© ÿßŸÑŸÖÿ≠ÿµŸàÿ±ÿ© ÿ®ŸäŸÜŸáŸÖÿßÿå ŸÜÿ≥ÿ™ÿÆÿØŸÖ:", options: ["ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÅÿ±ÿ¨ÿßÿ±", "ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÖŸÜŸÇŸÑÿ©", "ŸÅÿ±ÿ¨ÿßÿ± ŸàŸÖŸÜŸÇŸÑÿ©", "ŸÖÿ≥ÿ∑ÿ±ÿ© ŸÅŸÇÿ∑"], answer: 1 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ≤ÿßŸàŸäÿ™ÿß ŸÖÿ´ŸÑÿ´ 70¬∞ Ÿà70¬∞ÿå ŸÅŸÖÿß ŸÜŸàÿπŸáÿü", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖŸÜŸÅÿ±ÿ¨"], answer: 1 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ≤ŸàÿßŸäÿß ŸÖÿ´ŸÑÿ´ 60¬∞ÿå 60¬∞ÿå 60¬∞ÿå ŸÅŸÖÿß ŸÜŸàÿπŸáÿü", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÇÿßÿ¶ŸÖ"], answer: 2 },
      { type: "mc", q: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ÿßŸÑŸÖÿ™ÿ≥ÿßŸàŸäÿ© ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿü", options: ["1", "2", "3", "ŸÑÿß ÿ¥Ÿäÿ°"], answer: 1 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿå Ÿàÿ≤ÿßŸàŸäÿ© ÿ±ÿ£ÿ≥Ÿá 40¬∞ÿå ŸÅŸÉŸÖ ŸÉŸÑ ÿ≤ÿßŸàŸäÿ© ÿπŸÜÿØ ÿßŸÑŸÇÿßÿπÿØÿ©ÿü", options: ["60¬∞", "70¬∞", "80¬∞", "50¬∞"], answer: 1 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ≤ÿßŸàŸäÿ™ÿßŸÜ ÿπŸÜÿØ ÿßŸÑŸÇÿßÿπÿØÿ© ŸÅŸä ŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ 50¬∞ÿå ŸÅŸÉŸÖ ÿ≤ÿßŸàŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥ÿü", options: ["60¬∞", "70¬∞", "80¬∞", "90¬∞"], answer: 2 },
      { type: "mc", q: "ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπ ŸÖÿ´ŸÑÿ´: 5 ÿ≥ŸÖÿå 6 ÿ≥ŸÖÿå 7 ÿ≥ŸÖ. ŸáŸÑ ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖŸáÿü", options: ["ŸÜÿπŸÖ", "ŸÑÿß", "ŸÖÿ≥ÿ™ÿ≠ŸäŸÑ", "ŸÑÿß ŸäŸÖŸÉŸÜ"], answer: 0 },
      { type: "mc", q: "ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπ ŸÖÿ´ŸÑÿ´: 1 ÿ≥ŸÖÿå 2 ÿ≥ŸÖÿå 4 ÿ≥ŸÖ. ŸáŸÑ ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖŸáÿü", options: ["ŸÜÿπŸÖ", "ŸÑÿß", "ŸäŸÖŸÉŸÜ", "ŸÑÿß ŸÜÿπÿ±ŸÅ"], answer: 1 },
      { type: "mc", q: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑÿ≤ŸàÿßŸäÿß ÿßŸÑŸÖÿ™ÿ≥ÿßŸàŸäÿ© ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπÿü", options: ["1", "2", "3", "ŸÑÿß ÿ¥Ÿäÿ°"], answer: 2 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ≤ÿßŸàŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥ ŸÅŸä ŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ 20¬∞ÿå ŸÅŸÉŸÖ ŸÉŸÑ ÿ≤ÿßŸàŸäÿ© ÿπŸÜÿØ ÿßŸÑŸÇÿßÿπÿØÿ©ÿü", options: ["70¬∞", "80¬∞", "90¬∞", "60¬∞"], answer: 1 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿ≤ÿßŸàŸäÿ™ÿßŸÜ ÿπŸÜÿØ ÿßŸÑŸÇÿßÿπÿØÿ© 80¬∞ÿå ŸÅŸÉŸÖ ÿ≤ÿßŸàŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥ÿü", options: ["10¬∞", "20¬∞", "30¬∞", "40¬∞"], answer: 1 },
      { type: "mc", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ŸÑŸá ÿ∂ŸÑÿπÿßŸÜ 5 ÿ≥ŸÖ Ÿà5 ÿ≥ŸÖÿå ŸàÿßŸÑÿ´ÿßŸÑÿ´ 8 ÿ≥ŸÖ ŸáŸà:", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÇÿßÿ¶ŸÖ"], answer: 1 },
      { type: "mc", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπŸá 6 ÿ≥ŸÖÿå 6 ÿ≥ŸÖÿå 6 ÿ≥ŸÖ ŸáŸà:", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖŸÜŸÅÿ±ÿ¨"], answer: 2 },
      { type: "mc", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ÿßŸÑÿ∞Ÿä ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπŸá 3 ÿ≥ŸÖÿå 5 ÿ≥ŸÖÿå 7 ÿ≥ŸÖ ŸáŸà:", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ÿ≠ÿßÿØ"], answer: 0 },
      { type: "mc", q: "ÿπŸÜÿØ ÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© ÿ∂ŸÑÿπŸäŸÜ ŸàÿßŸÑÿ≤ÿßŸàŸäÿ© ÿ®ŸäŸÜŸáŸÖÿßÿå ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÖŸÜŸÇŸÑÿ© ŸÑŸÄ:", options: ["ÿ±ÿ≥ŸÖ ÿßŸÑÿ∂ŸÑÿπŸäŸÜ", "ŸÇŸäÿßÿ≥ ÿßŸÑÿ≤ÿßŸàŸäÿ©", "ÿ±ÿ≥ŸÖ ÿßŸÑŸÇÿßÿπÿØÿ©", "ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ±ÿ£ÿ≥"], answer: 1 },
      { type: "mc", q: "ÿßŸÑŸÅÿ±ÿ¨ÿßÿ± ŸäŸèÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿ±ÿ≥ŸÖ ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÑŸÖÿπÿ±ŸÅÿ©:", options: ["ŸÇŸäÿßÿ≥ ÿßŸÑÿ≤ÿßŸàŸäÿ©", "ÿ∑ŸàŸÑ ÿßŸÑÿ∂ŸÑÿπ", "ŸÖŸÉÿßŸÜ ÿßŸÑÿ™ŸÇÿßÿ∑ÿπ", "ÿßŸÑÿßÿ±ÿ™ŸÅÿßÿπ"], answer: 2 },
      { type: "mc", q: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÑÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© 3 ÿ£ÿ∂ŸÑÿßÿπÿü", options: ["1", "2", "3", "4"], answer: 1 },
      { type: "mc", q: "ÿπŸÜÿØ ÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© 3 ÿ£ÿ∂ŸÑÿßÿπÿå ŸÜÿ®ÿØÿ£ ÿ®ŸÄ:", options: ["ÿ±ÿ≥ŸÖ ÿ•ÿ≠ÿØŸâ ÿßŸÑÿ≤ŸàÿßŸäÿß", "ÿ±ÿ≥ŸÖ ÿ£ÿ≠ÿØ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "Ÿàÿ∂ÿπ ÿßŸÑŸÅÿ±ÿ¨ÿßÿ±", "ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ≤ŸàÿßŸäÿß"], answer: 1 },
      { type: "mc", q: "ÿ£Ÿä ŸÖŸÜ ÿßŸÑÿ™ÿßŸÑŸä ŸäŸèÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿ±ÿ≥ŸÖ ÿØÿßÿ¶ÿ±ÿ© ÿπŸÜÿØ ÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© 3 ÿ£ÿ∂ŸÑÿßÿπÿü", options: ["ÿßŸÑŸÖÿ≥ÿ∑ÿ±ÿ©", "ÿßŸÑŸÖŸÜŸÇŸÑÿ©", "ÿßŸÑŸÅÿ±ÿ¨ÿßÿ±", "ÿßŸÑŸÇŸÑŸÖ"], answer: 2 },
      { type: "mc", q: "ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿå ŸàÿßŸÑŸÇÿßÿπÿØÿ© 6 ÿ≥ŸÖÿå ŸÅŸÉŸÖ ÿ∑ŸàŸÑ ÿßŸÑÿ¨ÿ≤ÿ° ŸÖŸÜ ÿßŸÑŸÇÿßÿπÿØÿ© ÿ®ÿπÿØ ÿßŸÑŸÜÿµŸÅÿü", options: ["2 ÿ≥ŸÖ", "3 ÿ≥ŸÖ", "4 ÿ≥ŸÖ", "6 ÿ≥ŸÖ"], answer: 1 },
      { type: "mc", q: "ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿå ÿ•ÿ∞ÿß ŸÜÿ≤ŸÑ ÿπŸÖŸàÿØ ŸÖŸÜ ÿßŸÑÿ±ÿ£ÿ≥ ÿπŸÑŸâ ÿßŸÑŸÇÿßÿπÿØÿ©ÿå ŸÅÿ•ŸÜŸá ŸäŸÇÿ≥ŸÖ ÿßŸÑŸÇÿßÿπÿØÿ© ÿ•ŸÑŸâ:", options: ["ÿ¨ÿ≤ÿ£ŸäŸÜ ÿ∫Ÿäÿ± ŸÖÿ™ÿ≥ÿßŸàŸäŸäŸÜ", "ÿ¨ÿ≤ÿ£ŸäŸÜ ŸÖÿ™ÿ≥ÿßŸàŸäŸäŸÜ", "ÿ´ŸÑÿßÿ´ÿ© ÿ£ÿ¨ÿ≤ÿßÿ°", "ŸÑÿß ŸäŸÇÿ≥ŸÖŸáÿß"], answer: 1 },
      { type: "mc", q: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑÿ≤ŸàÿßŸäÿß ÿßŸÑŸÖÿ™ÿ≥ÿßŸàŸäÿ© ŸÅŸä ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜÿü", options: ["1", "2", "3", "ŸÑÿß ÿ¥Ÿäÿ°"], answer: 1 },
      { type: "mc", q: "ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπ ŸÖÿ´ŸÑÿ´: 7 ÿ≥ŸÖÿå 10 ÿ≥ŸÖÿå 5 ÿ≥ŸÖ. ŸáŸÑ ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖŸáÿü", options: ["ŸÜÿπŸÖ", "ŸÑÿß", "ŸÖÿ≥ÿ™ÿ≠ŸäŸÑ", "ŸÑÿß ŸäŸèÿπÿ±ŸÅ"], answer: 0 },
      { type: "mc", q: "ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπ ŸÖÿ´ŸÑÿ´: 4 ÿ≥ŸÖÿå 5 ÿ≥ŸÖÿå 10 ÿ≥ŸÖ. ŸáŸÑ ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖŸáÿü", options: ["ŸÜÿπŸÖ", "ŸÑÿß", "ŸäŸÖŸÉŸÜ", "ŸÑÿß ŸÜÿπÿ±ŸÅ"], answer: 1 },
      { type: "mc", q: "ÿßŸÑÿπŸÖŸàÿØ ÿßŸÑŸÜÿßÿ≤ŸÑ ŸÖŸÜ ÿ±ÿ£ÿ≥ ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ ÿπŸÑŸâ ÿßŸÑŸÇÿßÿπÿØÿ©:", options: ["ŸäŸÜÿµŸÅ ÿßŸÑŸÇÿßÿπÿØÿ© ŸÅŸÇÿ∑", "ŸäŸÜÿµŸÅ ÿ≤ÿßŸàŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥ ŸÅŸÇÿ∑", "ŸäŸÜÿµŸÅ ÿßŸÑŸÇÿßÿπÿØÿ© ŸàŸäŸÜÿµŸÅ ÿ≤ÿßŸàŸäÿ© ÿßŸÑÿ±ÿ£ÿ≥", "ŸÑÿß ŸäŸÜÿµŸÅ ÿ¥Ÿäÿ¶Ÿãÿß"], answer: 2 },
      { type: "mc", q: "ŸÑÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ®ŸÖÿπŸÑŸàŸÖŸäÿ© ÿ≤ÿßŸàŸäÿ™ŸäŸÜ ŸàÿßŸÑÿ∂ŸÑÿπ ÿßŸÑŸÖÿ≠ÿµŸàÿ± ÿ®ŸäŸÜŸáŸÖÿßÿå ŸÜÿ≥ÿ™ÿÆÿØŸÖ:", options: ["ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÅÿ±ÿ¨ÿßÿ±", "ŸÖÿ≥ÿ∑ÿ±ÿ© ŸàŸÖŸÜŸÇŸÑÿ©", "ŸÅÿ±ÿ¨ÿßÿ± ŸÅŸÇÿ∑", "ŸÖŸÜŸÇŸÑÿ© ŸÅŸÇÿ∑"], answer: 1 },
      { type: "mc", q: "ŸáŸÑ ŸäŸÖŸÉŸÜ ÿ±ÿ≥ŸÖ ŸÖÿ´ŸÑÿ´ ÿ£ÿ∑ŸàÿßŸÑ ÿ£ÿ∂ŸÑÿßÿπŸá: 3 ÿ≥ŸÖÿå 4 ÿ≥ŸÖÿå 8 ÿ≥ŸÖÿü", options: ["ŸÜÿπŸÖ", "ŸÑÿß", "Ÿäÿπÿ™ŸÖÿØ", "ŸÑÿß ŸÜÿπÿ±ŸÅ"], answer: 1 },
      { type: "mc", q: "ÿÆÿßÿµÿ© ÿßŸÑŸÖÿ´ŸÑÿ´ ÿ™ŸÇŸàŸÑ: ŸÖÿ¨ŸÖŸàÿπ ÿ∑ŸàŸÑŸä ÿ£Ÿä ÿ∂ŸÑÿπŸäŸÜ ______ ŸÖŸÜ ÿ∑ŸàŸÑ ÿßŸÑÿ∂ŸÑÿπ ÿßŸÑÿ´ÿßŸÑÿ´.", options: ["ÿ£ÿµÿ∫ÿ±", "Ÿäÿ≥ÿßŸàŸä", "ÿ£ŸÉÿ®ÿ±", "ÿ∂ÿπŸÅ"], answer: 2 },
      { type: "mc", q: "ÿßŸÑŸÖÿ´ŸÑÿ´ ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ ŸáŸà ÿ£Ÿäÿ∂Ÿãÿß:", options: ["ŸÖÿÆÿ™ŸÑŸÅ ÿßŸÑÿ£ÿ∂ŸÑÿßÿπ", "ŸÖÿ™ÿ≥ÿßŸàŸä ÿßŸÑÿ≥ÿßŸÇŸäŸÜ", "ŸÖŸÜŸÅÿ±ÿ¨", "ŸÇÿßÿ¶ŸÖ"], answer: 1 },
      { type: "mc", q: "ŸÖÿß ŸÖÿ¨ŸÖŸàÿπ ŸÇŸäÿßÿ≥ÿßÿ™ ÿ≤ŸàÿßŸäÿß ÿßŸÑŸÖÿ´ŸÑÿ´ÿü", options: ["90¬∞", "180¬∞", "360¬∞", "270¬∞"], answer: 1 }
    ];

    // ============ ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ============
    let currentPlayer = "X";
    let gameBoard = Array(9).fill("");
    let usedQuestionIndices = [];
    let currentCellIndex = null;
    const winningLines = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    // ============ ÿØŸàÿßŸÑ ÿßŸÑŸÑÿπÿ®ÿ© ============
    function getRandomUnusedQuestion() {
      const unused = allQuestions.map((_, i) => i).filter(i => !usedQuestionIndices.includes(i));
      if (unused.length === 0) {
        usedQuestionIndices = [];
        return getRandomUnusedQuestion();
      }
      const randomIndex = unused[Math.floor(Math.random() * unused.length)];
      usedQuestionIndices.push(randomIndex);
      return allQuestions[randomIndex];
    }

    function showModal(cellIndex) {
      currentCellIndex = cellIndex;
      const q = getRandomUnusedQuestion();
      document.getElementById("modalQuestion").textContent = q.q;
      
      const container = document.getElementById("optionsContainer");
      container.innerHTML = "";
      
      if (q.type === "tf") {
        // ÿ≥ÿ§ÿßŸÑ ÿµÿ≠/ÿÆÿ∑ÿ£
        const opts = ["ÿµÿ≠", "ÿÆÿ∑ÿ£"];
        opts.forEach((text, idx) => {
          const label = document.createElement("label");
          label.className = "option";
          label.innerHTML = `<input type="radio" name="ans" value="${idx}"> ${text}`;
          container.appendChild(label);
        });
      } else {
        // ÿ≥ÿ§ÿßŸÑ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØ
        q.options.forEach((opt, idx) => {
          const label = document.createElement("label");
          label.className = "option";
          label.innerHTML = `<input type="radio" name="ans" value="${idx}"> ${opt}`;
          container.appendChild(label);
        });
      }
      
      document.getElementById("errorMessage").textContent = "";
      document.getElementById("questionModal").style.display = "block";
    }

    function submitAnswer() {
      const selected = document.querySelector('input[name="ans"]:checked');
      if (!selected) {
        document.getElementById("errorMessage").textContent = "ÿßÿÆÿ™ÿ± ÿ•ÿ¨ÿßÿ®ÿ© ÿ£ŸàŸÑŸãÿß!";
        return;
      }

      const lastUsedIndex = usedQuestionIndices[usedQuestionIndices.length - 1];
      const q = allQuestions[lastUsedIndex];
      let isCorrect = false;

      if (q.type === "tf") {
        const userChoice = selected.value === "0"; // 0 = ÿµÿ≠ ‚Üí true, 1 = ÿÆÿ∑ÿ£ ‚Üí false
        isCorrect = (userChoice === q.answer);
      } else {
        isCorrect = (parseInt(selected.value) === q.answer);
      }

      if (isCorrect) {
        gameBoard[currentCellIndex] = currentPlayer;
        document.querySelector(`.cell[data-index="${currentCellIndex}"]`).textContent = currentPlayer;
        document.getElementById("questionModal").style.display = "none";
        
        if (checkWin()) {
          document.getElementById("status").textContent = `ÿßŸÑŸÑÿßÿπÿ® ${currentPlayer} ŸÅÿßÿ≤! üéâ`;
          return;
        }
        if (!gameBoard.includes("")) {
          document.getElementById("status").textContent = "ÿ™ÿπÿßÿØŸÑ! ü§ù";
          return;
        }

        currentPlayer = currentPlayer === "X" ? "O" : "X";
        document.getElementById("status").textContent = `ÿØŸàÿ± ÿßŸÑŸÑÿßÿπÿ®: ${currentPlayer}`;
      } else {
        document.getElementById("errorMessage").textContent = "ÿ•ÿ¨ÿßÿ®ÿ© ÿÆÿßÿ∑ÿ¶ÿ©! ÿ≠ÿßŸàŸÑ ŸÖÿ¨ÿØÿØŸãÿß.";
      }
    }

    function checkWin() {
      return winningLines.some(line => {
        const [a, b, c] = line;
        return gameBoard[a] && gameBoard[a] === gameBoard[b] && gameBoard[a] === gameBoard[c];
      });
    }

    function resetGame() {
      currentPlayer = "X";
      gameBoard = Array(9).fill("");
      usedQuestionIndices = [];
      document.querySelectorAll(".cell").forEach(c => c.textContent = "");
      document.getElementById("status").textContent = "ÿØŸàÿ± ÿßŸÑŸÑÿßÿπÿ®: X";
    }

    // ============ ÿ±ÿ®ÿ∑ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ============
    document.querySelectorAll(".cell").forEach(cell => {
      cell.addEventListener("click", () => {
        const idx = parseInt(cell.getAttribute("data-index"));
        if (gameBoard[idx] !== "" || checkWin()) return;
        showModal(idx);
      });
    });

    document.getElementById("reset").addEventListener("click", resetGame);
  </script>

</body>
</html>